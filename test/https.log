shm_t shm name: dnscache.dat
shm_ptr: 0x7f4184d47000
socket [4] add event
>> enable [4]  read event
Master socket listening now
>> loop now
>> epoll waited 1 events
>> waited socket[4]
socket [4]: READ event
>> HttpProxyConnection [1] insert into connections
socket [5] add event
>> enable [5]  read event
>> HttpProxyConnection [2] insert into connections
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: READ event
P:1|C:5|S:-1 [Enter client first read request]
P:1|C:5|S:-1 [client First Read recv 1bytes]
>> disable [5] read event
P:1|C:5|S:-1 [client parsed first request]
P:1|C:5|S:-1 [---- Fist line: CONNECT www.baidu.com:443 HTTP/1.1]
P:1|C:5|S:-1 [CONNECT www.baidu.com:443 HTTP/1.1
Host: www.baidu.com:443
User-Agent: curl/7.47.0
Proxy-Connection: Keep-Alive
]
query host: www.baidu.com, hash key: 45530
shm mutex unlock success
P:1|C:5|S:-1 [Async DNS query]
query->id: 32518
connect return: 0
packed query len: 31
socket [7] add event
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
ret: 31, send query
>> enable [7]  read event
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
recv 90 bytes
*********DNS Answer Header**************
query->id: 32518
header->id: 32518
header->flags: 33152
header->questions: 1
header->answers: 3
header->authotities: 0
header->additions: 0
****************************************
Total section : 3
start resolve answers
host: www.baidu.com, hash key: 45530
ip: 115.239.211.112
node host: , query host: www.baidu.com
updateNode now
update cache 1
shm mutex unlock success
updateDNS return : 0
>> disable [7] read event
>> unregister Socket
connect return: 0
socket [7] add event
P:1|C:5|S:7 [www.baidu.com, Enter HTTPS proxy, now tunnel it]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 63 bytes]
>> disable [5] write event
>> enable [5]  read event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: READ event
P:1|C:5|S:7 [Client Tunnel read]
P:1|C:5|S:7 [Client Tunnel read: 269 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:5|S:7 [Server Tunnel write]
P:1|C:5|S:7 [Server Tunnel write: 269 bytes]
>> disable [7] write event
>> enable [7]  read event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 72 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 72 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 1460 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 1460 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 1460 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 1460 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 1460 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 1460 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 2007 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 2007 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 347 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 347 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: READ event
P:1|C:5|S:7 [Client Tunnel read]
P:1|C:5|S:7 [Client Tunnel read: 75 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:5|S:7 [Server Tunnel write]
P:1|C:5|S:7 [Server Tunnel write: 75 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: READ event
P:1|C:5|S:7 [Client Tunnel read]
P:1|C:5|S:7 [Client Tunnel read: 51 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:5|S:7 [Server Tunnel write]
P:1|C:5|S:7 [Server Tunnel write: 51 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 226 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 226 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: READ event
P:1|C:5|S:7 [Client Tunnel read]
P:1|C:5|S:7 [Client Tunnel read: 106 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:5|S:7 [Server Tunnel write]
P:1|C:5|S:7 [Server Tunnel write: 106 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 1460 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 2 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 1460 bytes]
>> disable [5] write event
>> waited socket[7]
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
P:1|C:5|S:7 [Server Tunnel read: 1412 bytes]
>> enable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: WRITE event
P:1|C:5|S:7 [Client Tunnel write]
P:1|C:5|S:7 [Client Tunnel write: 1412 bytes]
>> disable [5] write event
>> loop now
>> epoll waited 1 events
>> waited socket[5]
socket [5]: READ event
P:1|C:5|S:7 [Client Tunnel read]
P:1|C:5|S:7 [Client Tunnel read: 31 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:5|S:7 [Server Tunnel write]
P:1|C:5|S:7 [Server Tunnel write: 31 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: RDHUP event
socket [7]: READ event
P:1|C:5|S:7 [Server Tunnel read]
socket [7]: AFTER event
>> disable [7] read event
>> unregister Socket
>> loop now
>> epoll waited 1 events
>> socket is closed in registered list
>> loop now
>> epoll waited 1 events
>> waited socket[4]
socket [4]: READ event
socket [7] add event
>> enable [7]  read event
>> HttpProxyConnection [3] insert into connections
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:7|S:-1 [Enter client first read request]
P:1|C:7|S:-1 [client First Read recv 1bytes]
>> disable [7] read event
P:1|C:7|S:-1 [client parsed first request]
P:1|C:7|S:-1 [---- Fist line: CONNECT www.baidu.com:443 HTTP/1.1]
P:1|C:7|S:-1 [CONNECT www.baidu.com:443 HTTP/1.1
Host: www.baidu.com:443
User-Agent: curl/7.47.0
Proxy-Connection: Keep-Alive
]
query host: www.baidu.com, hash key: 45530
Hit DNS cache
shm mutex unlock success
P:1|C:7|S:-1 [DNS Hit Cache, now connect to server]
connect return: 0
socket [8] add event
P:1|C:7|S:8 [www.baidu.com, Enter HTTPS proxy, now tunnel it]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 63 bytes]
>> disable [7] write event
>> enable [7]  read event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:7|S:8 [Client Tunnel read]
P:1|C:7|S:8 [Client Tunnel read: 269 bytes]
>> enable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: WRITE event
P:1|C:7|S:8 [Server Tunnel write]
P:1|C:7|S:8 [Server Tunnel write: 269 bytes]
>> disable [8] write event
>> enable [8]  read event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 72 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 72 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 1460 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 1460 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 1460 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 1460 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 1460 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 1460 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 2007 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 2007 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 347 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 347 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:7|S:8 [Client Tunnel read]
P:1|C:7|S:8 [Client Tunnel read: 75 bytes]
>> enable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: WRITE event
P:1|C:7|S:8 [Server Tunnel write]
P:1|C:7|S:8 [Server Tunnel write: 75 bytes]
>> disable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:7|S:8 [Client Tunnel read]
P:1|C:7|S:8 [Client Tunnel read: 51 bytes]
>> enable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: WRITE event
P:1|C:7|S:8 [Server Tunnel write]
P:1|C:7|S:8 [Server Tunnel write: 51 bytes]
>> disable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 226 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 226 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:7|S:8 [Client Tunnel read]
P:1|C:7|S:8 [Client Tunnel read: 106 bytes]
>> enable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: WRITE event
P:1|C:7|S:8 [Server Tunnel write]
P:1|C:7|S:8 [Server Tunnel write: 106 bytes]
>> disable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 1460 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 1460 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
P:1|C:7|S:8 [Server Tunnel read: 1412 bytes]
>> enable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: WRITE event
P:1|C:7|S:8 [Client Tunnel write]
P:1|C:7|S:8 [Client Tunnel write: 1412 bytes]
>> disable [7] write event
>> loop now
>> epoll waited 1 events
>> waited socket[7]
socket [7]: READ event
P:1|C:7|S:8 [Client Tunnel read]
P:1|C:7|S:8 [Client Tunnel read: 31 bytes]
>> enable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: WRITE event
P:1|C:7|S:8 [Server Tunnel write]
P:1|C:7|S:8 [Server Tunnel write: 31 bytes]
>> disable [8] write event
>> loop now
>> epoll waited 1 events
>> waited socket[8]
socket [8]: RDHUP event
socket [8]: READ event
P:1|C:7|S:8 [Server Tunnel read]
socket [8]: AFTER event
>> disable [8] read event
>> unregister Socket
>> loop now
>> epoll waited 1 events
>> socket is closed in registered list
>> loop now
